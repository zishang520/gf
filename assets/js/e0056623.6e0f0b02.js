"use strict";(self.webpackChunkgfdoc=self.webpackChunkgfdoc||[]).push([[82392],{69328:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>x});var c=t(85893),r=t(11151);const i={title:"\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",sidebar_position:3},l=void 0,s={id:"\u6838\u5fc3\u7ec4\u4ef6/\u7f13\u5b58\u7ba1\u7406/\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",title:"\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",description:"\u4ee5\u4e0b\u5e38\u7528\u65b9\u6cd5\u5217\u8868\uff0c\u6587\u6863\u66f4\u65b0\u53ef\u80fd\u6ede\u540e\u4e8e\u4ee3\u7801\u65b0\u7279\u6027\uff0c\u66f4\u591a\u7684\u65b9\u6cd5\u53ca\u793a\u4f8b\u8bf7\u53c2\u8003\u4ee3\u7801\u6587\u6863\uff1a https://pkg.go.dev/github.com/gogf/gf/v2/os/gcache",source:"@site/docs/4-\u6838\u5fc3\u7ec4\u4ef6/8-\u7f13\u5b58\u7ba1\u7406/3-\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd.md",sourceDirName:"4-\u6838\u5fc3\u7ec4\u4ef6/8-\u7f13\u5b58\u7ba1\u7406",slug:"/\u6838\u5fc3\u7ec4\u4ef6/\u7f13\u5b58\u7ba1\u7406/\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",permalink:"/docs/\u6838\u5fc3\u7ec4\u4ef6/\u7f13\u5b58\u7ba1\u7406/\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"\u7f13\u5b58\u7ba1\u7406-\u65b9\u6cd5\u4ecb\u7ecd",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u7f13\u5b58\u7ba1\u7406-Redis\u7f13\u5b58",permalink:"/docs/\u6838\u5fc3\u7ec4\u4ef6/\u7f13\u5b58\u7ba1\u7406/\u7f13\u5b58\u7ba1\u7406-Redis\u7f13\u5b58"},next:{title:"\u6a21\u677f\u5f15\u64ce",permalink:"/docs/\u6838\u5fc3\u7ec4\u4ef6/\u6a21\u677f\u5f15\u64ce/"}},d={},x=[{value:"<code>Set</code>",id:"set",level:2},{value:"<code>SetAdapter</code>",id:"setadapter",level:2},{value:"<code>SetIfNotExist</code>",id:"setifnotexist",level:2},{value:"<code>SetMap</code>",id:"setmap",level:2},{value:"<code>Size</code>",id:"size",level:2},{value:"<code>Update</code>",id:"update",level:2},{value:"<code>UpdateExpire</code>",id:"updateexpire",level:2},{value:"<code>Values</code>",id:"values",level:2},{value:"<code>Close</code>",id:"close",level:2},{value:"<code>Contains</code>",id:"contains",level:2},{value:"<code>Data</code>",id:"data",level:2},{value:"<code>Get</code>",id:"get",level:2},{value:"<code>GetExpire</code>",id:"getexpire",level:2},{value:"<code>GetOrSet</code>",id:"getorset",level:2},{value:"<code>GetOrSetFunc</code>",id:"getorsetfunc",level:2},{value:"<code>GetOrSetFuncLock</code>",id:"getorsetfunclock",level:2},{value:"<code>Keys</code>",id:"keys",level:2},{value:"<code>KeyStrings</code>",id:"keystrings",level:2},{value:"<code>Remove</code>",id:"remove",level:2},{value:"<code>Removes</code>",id:"removes",level:2},{value:"<code>MustGet</code>",id:"mustget",level:2},{value:"<code>MustGetOrSet</code>",id:"mustgetorset",level:2},{value:"<code>MustGetOrSetFunc</code>",id:"mustgetorsetfunc",level:2},{value:"<code>MustGetOrSetFuncLock</code>",id:"mustgetorsetfunclock",level:2},{value:"<code>MustContains</code>",id:"mustcontains",level:2},{value:"<code>MustGetExpire</code>",id:"mustgetexpire",level:2},{value:"<code>MustSize</code>",id:"mustsize",level:2},{value:"<code>MustData</code>",id:"mustdata",level:2},{value:"<code>MustKeys</code>",id:"mustkeys",level:2},{value:"<code>MustKeyStrings</code>",id:"mustkeystrings",level:2},{value:"<code>MustValues</code>",id:"mustvalues",level:2}];function o(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:["\u4ee5\u4e0b\u5e38\u7528\u65b9\u6cd5\u5217\u8868\uff0c\u6587\u6863\u66f4\u65b0\u53ef\u80fd\u6ede\u540e\u4e8e\u4ee3\u7801\u65b0\u7279\u6027\uff0c\u66f4\u591a\u7684\u65b9\u6cd5\u53ca\u793a\u4f8b\u8bf7\u53c2\u8003\u4ee3\u7801\u6587\u6863\uff1a ",(0,c.jsx)(n.a,{href:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gcache",children:"https://pkg.go.dev/github.com/gogf/gf/v2/os/gcache"})]}),"\n",(0,c.jsx)(n.h2,{id:"set",children:(0,c.jsx)(n.code,{children:"Set"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e\uff1a\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"key-value"})," \u952e\u503c\u5bf9\u8bbe\u7f6e\u7f13\u5b58\uff0c\u952e\u503c\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Set(ctx context.Context, key interface{}, value interface{}, duration time.Duration) error\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u5c06 ",(0,c.jsx)(n.code,{children:"slice"})," \u5207\u7247\u8bbe\u7f6e\u5230\u952e\u540d ",(0,c.jsx)(n.code,{children:"k1"})," \u7684\u7f13\u5b58\u4e2d\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Set() {\n  \tc := gcache.New()\n  \tc.Set(ctx, "k1", g.Slice{1, 2, 3, 4, 5, 6, 7, 8, 9}, 0)\n  \tfmt.Println(c.Get(ctx, "k1"))\n\n  \t// Output:\n  \t// [1,2,3,4,5,6,7,8,9] <nil>\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"setadapter",children:(0,c.jsx)(n.code,{children:"SetAdapter"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"SetAdapter"})," \u66f4\u6539\u6b64\u7f13\u5b58\u5bf9\u8c61\u7684\u5e95\u5c42\u9002\u914d\u5668\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u8bbe\u7f6e\u51fd\u6570\u4e0d\u662f\u5e76\u53d1\u5b89\u5168\u7684\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"SetAdapter(adapter Adapter)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a\u53ef\u4ee5\u81ea\u5df1\u6839\u636e\u9700\u8981\u5b9e\u73b0\u4efb\u610f\u7f13\u5b58\u9002\u914d\u5668\uff0c\u5b9e\u73b0\u63a5\u53e3\u65b9\u6cd5\u5373\u53ef\u3002"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_SetAdapters() {\n  \tc := gcache.New()\n  \tadapter := gcache.New()\n  \tc.SetAdapter(adapter)\n  \tc.Set(ctx, "k1", g.Slice{1, 2, 3, 4, 5, 6, 7, 8, 9}, 0)\n  \tfmt.Println(c.Get(ctx, "k1"))\n\n  \t// Output:\n  \t// [1,2,3,4,5,6,7,8,9] <nil>\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"setifnotexist",children:(0,c.jsx)(n.code,{children:"SetIfNotExist"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u5f53\u6307\u5b9a ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u952e\u503c\u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e\u5176\u5bf9\u5e94\u7684\u952e\u503c ",(0,c.jsx)(n.code,{children:"value"})," \u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"true"}),"\uff0c\u5426\u5219\u4ec0\u4e48\u90fd\u4e0d\u505a\u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"false"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"SetIfNotExist(ctx context.Context, key interface{}, value interface{}, duration time.Duration) (ok bool, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"SetIfNotExist"})," \u76f4\u63a5 ",(0,c.jsx)(n.code,{children:"\u5224\u65ad\u5199\u5165"}),"\uff0c\u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_SetIfNotExist() {\n  \tc := gcache.New()\n  \t// Write when the key name does not exist, and set the expiration time to 1000 milliseconds\n  \tk1, err := c.SetIfNotExist(ctx, "k1", "v1", 1000*time.Millisecond)\n  \tfmt.Println(k1, err)\n\n  \t// Returns false when the key name already exists\n  \tk2, err := c.SetIfNotExist(ctx, "k1", "v2", 1000*time.Millisecond)\n  \tfmt.Println(k2, err)\n\n  \t// Print the current list of key values\n  \tkeys1, _ := c.Keys(ctx)\n  \tfmt.Println(keys1)\n\n  \t// It does not expire if `duration` == 0. It deletes the `key` if `duration` < 0 or given `value` is nil.\n  \tc.SetIfNotExist(ctx, "k1", 0, -10000)\n\n  \t// Wait 1 second for K1: V1 to expire automatically\n  \ttime.Sleep(1200 * time.Millisecond)\n\n  \t// Print the current key value pair again and find that K1: V1 has expired\n  \tkeys2, _ := c.Keys(ctx)\n  \tfmt.Println(keys2)\n\n  \t// Output:\n  \t// true <nil>\n  \t// false <nil>\n  \t// [k1]\n  \t// [<nil>]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"setmap",children:(0,c.jsx)(n.code,{children:"SetMap"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u6279\u91cf\u8bbe\u7f6e\u952e\u503c\u5bf9\uff0c\u8f93\u5165\u53c2\u6570\u7c7b\u578b\u4e3a ",(0,c.jsx)(n.code,{children:"map[interface{}]interface{}"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"SetMap(ctx context.Context, data map[interface{}]interface{}, duration time.Duration) error\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_SetMap() {\n   \tc := gcache.New()\n  \t// map[interface{}]interface{}\n  \tdata := g.MapAnyAny{\n  \t\t"k1": "v1",\n  \t\t"k2": "v2",\n  \t\t"k3": "v3",\n  \t}\n  \tc.SetMap(ctx, data, 1000*time.Millisecond)\n\n  \t// Gets the specified key value\n  \tv1, _ := c.Get(ctx, "k1")\n  \tv2, _ := c.Get(ctx, "k2")\n  \tv3, _ := c.Get(ctx, "k3")\n\n  \tfmt.Println(v1, v2, v3)\n\n  \t// Output:\n  \t// v1 v2 v3\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"size",children:(0,c.jsx)(n.code,{children:"Size"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"Size"})," \u8fd4\u56de\u7f13\u5b58\u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"\u9879\u6570"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Size(ctx context.Context) (size int, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func ExampleCache_Size() {\n  \tc := gcache.New()\n\n  \t// Add 10 elements without expiration\n  \tfor i := 0; i < 10; i++ {\n  \t\tc.Set(ctx, i, i, 0)\n  \t}\n\n  \t// Size returns the number of items in the cache.\n  \tn, _ := c.Size(ctx)\n  \tfmt.Println(n)\n\n  \t// Output:\n  \t// 10\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"update",children:(0,c.jsx)(n.code,{children:"Update"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"Update"})," \u66f4\u65b0 ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u5bf9\u5e94\u7684\u952e\u503c\uff0c\u4f46\u4e0d\u66f4\u6539\u5176 ",(0,c.jsx)(n.code,{children:"\u8fc7\u671f\u65f6\u95f4"}),"\uff0c\u5e76\u8fd4\u56de\u65e7\u503c\u3002\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de\u7684 ",(0,c.jsx)(n.code,{children:"exist"})," \u503c\u4e3a ",(0,c.jsx)(n.code,{children:"false"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Update(ctx context.Context, key interface{}, value interface{}) (oldValue *gvar.Var, exist bool, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"SetMap"})," \u6dfb\u52a0\u591a\u4e2a\u7f13\u5b58\uff0c\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Update"})," \u6307\u5b9a ",(0,c.jsx)(n.code,{children:"key"})," \u4fee\u6539 ",(0,c.jsx)(n.code,{children:"value"}),"\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Update() {\n  \tc := gcache.New()\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2", "k3": "v3"}, 0)\n\n  \tk1, _ := c.Get(ctx, "k1")\n  \tfmt.Println(k1)\n  \tk2, _ := c.Get(ctx, "k2")\n  \tfmt.Println(k2)\n  \tk3, _ := c.Get(ctx, "k3")\n  \tfmt.Println(k3)\n\n  \tre, exist, _ := c.Update(ctx, "k1", "v11")\n  \tfmt.Println(re, exist)\n\n  \tre1, exist1, _ := c.Update(ctx, "k4", "v44")\n  \tfmt.Println(re1, exist1)\n\n  \tkup1, _ := c.Get(ctx, "k1")\n  \tfmt.Println(kup1)\n  \tkup2, _ := c.Get(ctx, "k2")\n  \tfmt.Println(kup2)\n  \tkup3, _ := c.Get(ctx, "k3")\n  \tfmt.Println(kup3)\n\n  \t// Output:\n  \t// v1\n  \t// v2\n  \t// v3\n  \t// v1 true\n  \t//  false\n  \t// v11\n  \t// v2\n  \t// v3\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"updateexpire",children:(0,c.jsx)(n.code,{children:"UpdateExpire"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"UpdateExpire"})," \u66f4\u65b0 ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u8fc7\u671f\u65f6\u95f4\u5e76\u8fd4\u56de\u65e7\u7684 ",(0,c.jsx)(n.code,{children:"\u8fc7\u671f\u65f6\u95f4\u503c"}),"\u3002\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"-1"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"UpdateExpire(ctx context.Context, key interface{}, duration time.Duration) (oldDuration time.Duration, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"UpdateExpire"})," \u66f4\u65b0 ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u8fc7\u671f\u65f6\u95f4\u5e76\u6253\u5370\u67e5\u770b\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_UpdateExpire() {\n  \tc := gcache.New()\n  \tc.Set(ctx, "k1", "v1", 1000*time.Millisecond)\n  \texpire, _ := c.GetExpire(ctx, "k1")\n  \tfmt.Println(expire)\n\n  \tc.UpdateExpire(ctx, "k1", 500*time.Millisecond)\n\n  \texpire1, _ := c.GetExpire(ctx, "k1")\n  \tfmt.Println(expire1)\n\n  \t// Output:\n  \t// 1s\n  \t// 500ms\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"values",children:(0,c.jsx)(n.code,{children:"Values"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Values"})," \u83b7\u53d6\u7f13\u5b58\u4e2d\u7684\u6240\u6709\u503c\uff0c\u4ee5\u5207\u7247\u65b9\u5f0f\u8fd4\u56de\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Values(ctx context.Context) (values []interface{}, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Values() {\n  \tc := gcache.New()\n\n  \tc.Set(ctx, "k1", g.Map{"k1": "v1", "k2": "v2"}, 0)\n\n  \t// Values returns all values in the cache as slice.\n  \tdata, _ := c.Values(ctx)\n  \tfmt.Println(data)\n\n  \t// May Output:\n  \t// [map[k1:v1 k2:v2]]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"close",children:(0,c.jsx)(n.code,{children:"Close"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u5173\u95ed\u7f13\u5b58\uff0c\u8ba9 ",(0,c.jsx)(n.code,{children:"GC"})," \u56de\u6536\u8d44\u6e90\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b ",(0,c.jsx)(n.code,{children:"\u53ef\u4e0d\u5173\u95ed"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Close(ctx context.Context) error\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"Close"})," \u5373\u53ef\u5173\u95ed\u7f13\u5b58\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Close() {\n   \tc := gcache.New()\n\n  \tc.Set(ctx, "k1", "v", 0)\n  \tdata, _ := c.Get(ctx, "k1")\n  \tfmt.Println(data)\n\n  \t// Close closes the cache if necessary.\n  \tc.Close(ctx)\n\n  \tdata1, _ := c.Get(ctx, "k1")\n\n  \tfmt.Println(data1)\n\n   \t// Output:\n  \t// v\n  \t// v\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"contains",children:(0,c.jsx)(n.code,{children:"Contains"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u5982\u679c\u7f13\u5b58\u4e2d\u5b58\u5728\u6307\u5b9a\u7684 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219 ",(0,c.jsx)(n.code,{children:"Contains"})," \u8fd4\u56de ",(0,c.jsx)(n.code,{children:"true"}),"\uff0c\u5426\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"false"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Contains(ctx context.Context, key interface{}) (bool, error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Contains() {\n   \tc := gcache.New()\n\n  \t// Set Cache\n  \tc.Set(ctx, "k", "v", 0)\n\n  \tdata, _ := c.Contains(ctx, "k")\n  \tfmt.Println(data)\n\n  \t// return false\n  \tdata1, _ := c.Contains(ctx, "k1")\n  \tfmt.Println(data1)\n\n   \t// Output:\n  \t// true\n  \t// false\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"data",children:(0,c.jsx)(n.code,{children:"Data"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u6570\u636e\u4ee5 ",(0,c.jsx)(n.code,{children:"map"})," \u7c7b\u578b\u8fd4\u56de\u7f13\u5b58\u4e2d\u6240\u6709 ",(0,c.jsx)(n.code,{children:"\u952e\u503c\u5bf9('key':'value')"})," \u7684\u62f7\u8d1d\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Data(ctx context.Context) (data map[interface{}]interface{}, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u83b7\u53d6\u6240\u6709\u7f13\u5b58\u6570\u636e\u4ee5 ",(0,c.jsx)(n.code,{children:"map[interface{}]interface{}"})," \u8fd4\u56de"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Data() {\n    \tc := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1"}, 0)\n  \t//c.Set(ctx, "k5", "v5", 0)\n\n  \tdata, _ := c.Data(ctx)\n  \tfmt.Println(data)\n\n   \t// Output:\n  \t// map[k1:v1]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"get",children:(0,c.jsx)(n.code,{children:"Get"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"Get"})," \u68c0\u7d22\u5e76\u8fd4\u56de\u7ed9\u5b9a ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u5173\u8054\u503c\u3002\u5982\u679c\u5b83\u4e0d\u5b58\u5728\u3001\u503c\u4e3a\u96f6\u6216\u5df2\u8fc7\u671f\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"nil"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Get(ctx context.Context, key interface{}) (*gvar.Var, error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Get() {\n     \tc := gcache.New()\n\n  \t// Set Cache Object\n  \tc.Set(ctx, "k1", "v1", 0)\n\n  \tdata, _ := c.Get(ctx, "k1")\n  \tfmt.Println(data)\n   \t// Output:\n  \t// v1\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"getexpire",children:(0,c.jsx)(n.code,{children:"GetExpire"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"GetExpire"})," \u68c0\u7d22\u5e76\u8fd4\u56de\u7f13\u5b58\u4e2d ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u8fc7\u671f\u65f6\u95f4\u3002\u6ce8\u610f\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"key"})," \u4e3a\u6c38\u4e0d\u8fc7\u671f\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"0"}),"\u3002\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"-1"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"GetExpire(ctx context.Context, key interface{}) (time.Duration, error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_GetExpire() {\n      c := gcache.New()\n\n  \t// Set cache without expiration\n  \tc.Set(ctx, "k", "v", 10000*time.Millisecond)\n\n  \texpire, _ := c.GetExpire(ctx, "k")\n  \tfmt.Println(expire)\n\n   \t// Output:\n  \t// 10s\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"getorset",children:(0,c.jsx)(n.code,{children:"GetOrSet"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u68c0\u7d22\u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u503c\uff0c\u6216\u8005\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"key-value"})," \u5bf9\uff0c\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u76f4\u63a5\u8bbe\u7f6e\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"GetOrSet(ctx context.Context, key interface{}, value interface{}, duration time.Duration) (result *gvar.Var, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u7528 ",(0,c.jsx)(n.code,{children:"GetOrSet"})," \u5224\u65ad ",(0,c.jsx)(n.code,{children:"key"})," \u4e0d\u5b58\u5728\u5219\u76f4\u63a5\u8bbe\u7f6e\uff0c\u5e76\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"duration"})," \u65f6\u95f4\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_GetOrSet() {\n      c := gcache.New()\n\n  \tdata, _ := c.GetOrSet(ctx, "k", "v", 10000*time.Millisecond)\n  \tfmt.Println(data)\n\n  \tdata1, _ := c.Get(ctx, "k")\n  \tfmt.Println(data1)\n\n  \t// Output:\n  \t// v\n  \t// v\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"getorsetfunc",children:(0,c.jsx)(n.code,{children:"GetOrSetFunc"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u68c0\u7d22\u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u503c\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"key"})," \u5bf9\u5e94\u7684\u503c\u4e0d\u5b58\u5728\u5219\u4f7f\u7528\u51fd\u6570 ",(0,c.jsx)(n.code,{children:"func"})," \u7684\u7ed3\u679c\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5982\u679c\u7f13\u5b58\u4e2d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de\u5176\u7ed3\u679c\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"GetOrSetFunc(ctx context.Context, key interface{}, f func(ctx context.Context) (interface{}, error), duration time.Duration) (result *gvar.Var, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a ",(0,c.jsx)(n.code,{children:"k1"})," \u7684\u8bbe\u7f6e\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"func"})," \u6267\u884c\u7ed3\u679c\uff0c ",(0,c.jsx)(n.code,{children:"k2"})," \u8fd4\u56de ",(0,c.jsx)(n.code,{children:"nil"})," \u5219\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_GetOrSetFunc() {\n      c := gcache.New()\n\n  \tc.GetOrSetFunc(ctx, "k1", func(ctx context.Context) (value interface{}, err error) {\n  \t\treturn "v1", nil\n  \t}, 10000*time.Millisecond)\n  \tv, _ := c.Get(ctx, "k1")\n  \tfmt.Println(v)\n\n  \tc.GetOrSetFunc(ctx, "k2", func(ctx context.Context) (value interface{}, err error) {\n  \t\treturn nil, nil\n  \t}, 10000*time.Millisecond)\n  \tv1, _ := c.Get(ctx, "k2")\n  \tfmt.Println(v1)\n\n  \t// Output:\n  \t// v1\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"getorsetfunclock",children:(0,c.jsx)(n.code,{children:"GetOrSetFuncLock"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u4e0e ",(0,c.jsx)(n.code,{children:"GetOrSetFunc"})," \u4e00\u81f4\uff0c\u4f46\u662f\u4e0d\u80fd\u91cd\u590d\u6216\u8005 ",(0,c.jsx)(n.code,{children:"\u8986\u76d6\u6ce8\u518c"})," \u7f13\u5b58\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"GetOrSetFuncLock(ctx context.Context, key interface{}, f func(ctx context.Context) (interface{}, error), duration time.Duration) (result *gvar.Var, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u793a\u4f8b\uff1a\u7b2c1\u6b21\u7684\u8bbe\u7f6e\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"func"})," \u6267\u884c\u7ed3\u679c\uff0c\u7b2c2\u6b21\u8bbe\u7f6e\u64cd\u4f5c\u5219\u5931\u6548\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_GetOrSetFuncLock() {\n      c := gcache.New()\n\n  \tc.GetOrSetFuncLock(ctx, "k1", func(ctx context.Context) (value interface{}, err error) {\n  \t\treturn "v1", nil\n  \t}, 0)\n  \tv, _ := c.Get(ctx, "k1")\n  \tfmt.Println(v)\n\n  \tc.GetOrSetFuncLock(ctx, "k1", func(ctx context.Context) (value interface{}, err error) {\n  \t\treturn "update v1", nil\n  \t}, 0)\n  \tv, _ = c.Get(ctx, "k1")\n  \tfmt.Println(v)\n\n  \tc.Remove(ctx, g.Slice{"k1"}...)\n\n  \t// Output:\n  \t// v1\n  \t// v1\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"keys",children:(0,c.jsx)(n.code,{children:"Keys"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u7f13\u5b58\u4e2d\u6240\u6709\u7684 ",(0,c.jsx)(n.code,{children:"key"})," \u6240\u6709\u952e\u540d\u5e76\u4ee5 ",(0,c.jsx)(n.code,{children:"\u5207\u7247\u683c\u5f0f(Slice)"})," \u8fd4\u56de\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Keys(ctx context.Context) (keys []interface{}, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Keys() {\n      c := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1"}, 0)\n\n  \t// Print the current list of key values\n  \tkeys1, _ := c.Keys(ctx)\n  \tfmt.Println(keys1)\n\n  \t// Output:\n  \t// [k1]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"keystrings",children:(0,c.jsx)(n.code,{children:"KeyStrings"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"KeyStrings"})," \u4ee5\u5b57\u7b26\u4e32 ",(0,c.jsx)(n.code,{children:"\u5207\u7247"})," \u7684\u5f62\u5f0f\u8fd4\u56de\u7f13\u5b58\u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"\u6240\u6709\u952e"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) KeyStrings(ctx context.Context) ([]string, error) {\n  \tkeys, err := c.Keys(ctx)\n  \tif err != nil {\n  \t\treturn nil, err\n  \t}\n  \treturn gconv.Strings(keys), nil\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_KeyStrings() {\n  \tc := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2"}, 0)\n\n  \t// KeyStrings returns all keys in the cache as string slice.\n  \tkeys,_ := c.KeyStrings(ctx)\n  \tfmt.Println(keys)\n\n  \t// May Output:\n  \t// [k1 k2]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"remove",children:(0,c.jsx)(n.code,{children:"Remove"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u79fb\u9664\u4ece\u7f13\u5b58\u4e2d ",(0,c.jsx)(n.code,{children:"\u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u952e"}),"\uff0c\u5e76\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u5220\u9664\u7684\u952e\u503c\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"Remove(ctx context.Context, keys ...interface{}) (lastValue *gvar.Var, err error)\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Remove() {\n      c := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2"}, 0)\n\n  \tc.Remove(ctx, "k1")\n\n  \tdata, _ := c.Data(ctx)\n  \tfmt.Println(data)\n\n  \t// Output:\n  \t// map[k2:v2]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"removes",children:(0,c.jsx)(n.code,{children:"Removes"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u4ece\u7f13\u5b58\u4e2d ",(0,c.jsx)(n.code,{children:"\u5220\u9664\u591a\u4e2a\u952e"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c\u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) Removes(ctx context.Context, keys []interface{}) error {\n  \t_, err := c.Remove(ctx, keys...)\n  \treturn err\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_Removes() {\n      c := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2", "k3": "v3", "k4": "v4"}, 0)\n\n  \tc.Removes(ctx, g.Slice{"k1", "k2", "k3"})\n\n  \tdata, _ := c.Data(ctx)\n  \tfmt.Println(data)\n\n  \t// Output:\n  \t// map[k4:v4]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustget",children:(0,c.jsx)(n.code,{children:"MustGet"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"MustGet"})," \u68c0\u7d22\u5e76\u8fd4\u56de\u7ed9\u5b9a ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u5173\u8054\u503c\u3002\u5982\u679c\u5b83\u4e0d\u5b58\u5728\u3001\u503c\u4e3a\u96f6\u6216\u5df2\u8fc7\u671f\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"nil"})," \u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustGet(ctx context.Context, key interface{}) *gvar.Var {\n  \tv, err := c.Get(ctx, key)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustGet() {\n   \tc := gcache.New()\n\n   \tc.Set(ctx, "k1", "v1", 0)\n   \tk2 := c.MustGet(ctx, "k2")\n\n   \tk1 := c.MustGet(ctx, "k1")\n  \tfmt.Println(k1)\n\n  \tfmt.Println(k2)\n\n   \t// Output:\n  \t// v1\n  \t//\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustgetorset",children:(0,c.jsx)(n.code,{children:"MustGetOrSet"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u68c0\u7d22\u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u503c\uff0c\u6216\u8005\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"key-value"})," \u5bf9\uff0c\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u76f4\u63a5\u8bbe\u7f6e\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustGetOrSet(ctx context.Context, key interface{}, value interface{}, duration time.Duration) *gvar.Var {\n  \tv, err := c.GetOrSet(ctx, key, value, duration)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustGetOrSet() {\n\n  \t// Create a cache object,\n  \t// Of course, you can also easily use the gcache package method directly\n  \tc := gcache.New()\n\n  \t// MustGetOrSet acts like GetOrSet, but it panics if any error occurs.\n  \tk1 := c.MustGetOrSet(ctx, "k1", "v1", 0)\n  \tfmt.Println(k1)\n\n  \tk2 := c.MustGetOrSet(ctx, "k1", "v2", 0)\n  \tfmt.Println(k2)\n\n  \t// Output:\n  \t// v1\n  \t// v1\n\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustgetorsetfunc",children:(0,c.jsx)(n.code,{children:"MustGetOrSetFunc"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u68c0\u7d22\u5e76\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u503c\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"key"})," \u5bf9\u5e94\u7684\u503c\u4e0d\u5b58\u5728\u5219\u4f7f\u7528\u51fd\u6570 ",(0,c.jsx)(n.code,{children:"func"})," \u7684\u7ed3\u679c\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5982\u679c\u7f13\u5b58\u4e2d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de\u5176\u7ed3\u679c\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustGetOrSetFunc(ctx context.Context, key interface{}, f func(ctx context.Context) (interface{}, error), duration time.Duration) *gvar.Var {\n  \tv, err := c.GetOrSetFunc(ctx, key, f, duration)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func ExampleCache_MustGetOrSetFunc() {\n  \tc := gcache.New()\n\n  \tc.MustGetOrSetFunc(ctx, 1, func(ctx context.Context) (interface{}, error) {\n  \t\treturn 111, nil\n  \t}, 10000*time.Millisecond)\n  \tv := c.MustGet(ctx, 1)\n  \tfmt.Println(v)\n\n  \tc.MustGetOrSetFunc(ctx, 2, func(ctx context.Context) (interface{}, error) {\n  \t\treturn nil, nil\n  \t}, 10000*time.Millisecond)\n  \tv1 := c.MustGet(ctx, 2)\n  \tfmt.Println(v1)\n\n  \t// Output:\n  \t// 111\n  \t//\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"mustgetorsetfunclock",children:(0,c.jsx)(n.code,{children:"MustGetOrSetFuncLock"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u4e0e ",(0,c.jsx)(n.code,{children:"MustGetOrSetFunc"})," \u4e00\u81f4\uff0c\u4f46\u662f\u4e0d\u80fd\u91cd\u590d\u6216\u8005 ",(0,c.jsx)(n.code,{children:"\u8986\u76d6\u6ce8\u518c"})," \u7f13\u5b58\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustGetOrSetFuncLock(ctx context.Context, key interface{}, f func(ctx context.Context) (interface{}, error), duration time.Duration) *gvar.Var {\n  \tv, err := c.GetOrSetFuncLock(ctx, key, f, duration)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustGetOrSetFuncLock() {\n  \tc := gcache.New()\n\n  \tc.MustGetOrSetFuncLock(ctx, "k1", func(ctx context.Context) (interface{}, error) {\n  \t\treturn "v1", nil\n  \t}, 0)\n  \tv := c.MustGet(ctx, "k1")\n  \tfmt.Println(v)\n\n  \t// Modification failed\n  \tc.MustGetOrSetFuncLock(ctx, "k1", func(ctx context.Context) (interface{}, error) {\n  \t\treturn "update v1", nil\n  \t}, 0)\n  \tv = c.MustGet(ctx, "k1")\n  \tfmt.Println(v)\n\n  \t// Output:\n  \t// v1\n  \t// v1\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustcontains",children:(0,c.jsx)(n.code,{children:"MustContains"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u5982\u679c\u7f13\u5b58\u4e2d\u5b58\u5728\u6307\u5b9a\u7684 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219 ",(0,c.jsx)(n.code,{children:"Contains"})," \u8fd4\u56de ",(0,c.jsx)(n.code,{children:"true"}),"\uff0c\u5426\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"false"}),"\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustContains(ctx context.Context, key interface{}) bool {\n  \tv, err := c.Contains(ctx, key)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustContains() {\n  \tc := gcache.New()\n\n  \t// Set Cache\n  \tc.Set(ctx, "k", "v", 0)\n\n  \t// Contains returns true if `key` exists in the cache, or else returns false.\n  \t// return true\n  \tdata := c.MustContains(ctx, "k")\n  \tfmt.Println(data)\n\n  \t// return false\n  \tdata1 := c.MustContains(ctx, "k1")\n  \tfmt.Println(data1)\n\n  \t// Output:\n  \t// true\n  \t// false\n\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustgetexpire",children:(0,c.jsx)(n.code,{children:"MustGetExpire"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e:\xa0 ",(0,c.jsx)(n.code,{children:"MustGetExpire"})," \u68c0\u7d22\u5e76\u8fd4\u56de\u7f13\u5b58\u4e2d ",(0,c.jsx)(n.code,{children:"key"})," \u7684\u8fc7\u671f\u65f6\u95f4\u3002\u6ce8\u610f\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"key"})," \u4e3a\u6c38\u4e0d\u8fc7\u671f\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"0"}),"\u3002\u5982\u679c\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728 ",(0,c.jsx)(n.code,{children:"key"}),"\uff0c\u5219\u8fd4\u56de ",(0,c.jsx)(n.code,{children:"-1"}),"\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustGetExpire(ctx context.Context, key interface{}) time.Duration {\n  \tv, err := c.GetExpire(ctx, key)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustGetExpire() {\n  \tc := gcache.New()\n\n  \t// Set cache without expiration\n  \tc.Set(ctx, "k", "v", 10000*time.Millisecond)\n\n  \t// MustGetExpire acts like GetExpire, but it panics if any error occurs.\n  \texpire := c.MustGetExpire(ctx, "k")\n  \tfmt.Println(expire)\n\n  \t// May Output:\n  \t// 10s\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustsize",children:(0,c.jsx)(n.code,{children:"MustSize"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e:\xa0 ",(0,c.jsx)(n.code,{children:"MustSize"})," \u8fd4\u56de\u7f13\u5b58\u4e2d\u7684\u9879\u6570\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustSize(ctx context.Context) int {\n  \tv, err := c.Size(ctx)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func ExampleCache_MustSize() {\n  \tc := gcache.New()\n\n  \t// Add 10 elements without expiration\n  \tfor i := 0; i < 10; i++ {\n  \t\tc.Set(ctx, i, i, 0)\n  \t}\n\n  \t// Size returns the number of items in the cache.\n  \tn := c.MustSize(ctx)\n  \tfmt.Println(n)\n\n  \t// Output:\n  \t// 10\n}\n"})}),"\n",(0,c.jsx)(n.h2,{id:"mustdata",children:(0,c.jsx)(n.code,{children:"MustData"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: \u6570\u636e\u4ee5 ",(0,c.jsx)(n.code,{children:"map"})," \u7c7b\u578b\u8fd4\u56de\u7f13\u5b58\u4e2d\u6240\u6709 ",(0,c.jsx)(n.code,{children:"\u952e\u503c\u5bf9('key':'value')"})," \u7684\u62f7\u8d1d\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustData(ctx context.Context) map[interface{}]interface{} {\n  \tv, err := c.Data(ctx)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustData() {\n  \tc := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1"}, 0)\n\n  \tdata := c.MustData(ctx)\n  \tfmt.Println(data)\n\n  \t// Set Cache\n  \tc.Set(ctx, "k5", "v5", 0)\n  \tdata1, _ := c.Get(ctx, "k1")\n  \tfmt.Println(data1)\n\n  \t// Output:\n  \t// map[k1:v1]\n  \t// v1\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustkeys",children:(0,c.jsx)(n.code,{children:"MustKeys"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"MustKeys"})," \u4ee5 ",(0,c.jsx)(n.code,{children:"(slice)\u5207\u7247"})," \u7684\u5f62\u5f0f\u8fd4\u56de\u7f13\u5b58\u4e2d\u7684\u6240\u6709\u952e\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustKeys(ctx context.Context) []interface{} {\n  \tv, err := c.Keys(ctx)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustKeys() {\n  \tc := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2"}, 0)\n\n  \t// MustKeys acts like Keys, but it panics if any error occurs.\n  \tkeys1 := c.MustKeys(ctx)\n  \tfmt.Println(keys1)\n\n  \t// May Output:\n  \t// [k1 k2]\n\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustkeystrings",children:(0,c.jsx)(n.code,{children:"MustKeyStrings"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"MustKeyStrings"})," \u4ee5 ",(0,c.jsx)(n.code,{children:"\u5b57\u7b26\u4e32(slice)\u5207\u7247"})," \u7684\u5f62\u5f0f\u8fd4\u56de\u7f13\u5b58\u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"\u6240\u6709\u952e"}),"\u3002\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustKeyStrings(ctx context.Context) []string {\n  \tv, err := c.KeyStrings(ctx)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustKeyStrings() {\n  \tc := gcache.New()\n\n  \tc.SetMap(ctx, g.MapAnyAny{"k1": "v1", "k2": "v2"}, 0)\n\n  \t// MustKeyStrings returns all keys in the cache as string slice.\n  \t// MustKeyStrings acts like KeyStrings, but it panics if any error occurs.\n  \tkeys := c.MustKeyStrings(ctx)\n  \tfmt.Println(keys)\n\n  \t// May Output:\n  \t// [k1 k2]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"mustvalues",children:(0,c.jsx)(n.code,{children:"MustValues"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u8bf4\u660e: ",(0,c.jsx)(n.code,{children:"MustValues"})," \u4ee5 ",(0,c.jsx)(n.code,{children:"(slice)\u5207\u7247"})," \u7684\u5f62\u5f0f\u8fd4\u56de\u7f13\u5b58\u4e2d\u7684\u6240\u6709\u503c\uff0c\u5982\u679c ",(0,c.jsx)(n.code,{children:"err"})," \u8fd4\u56de\u4e0d\u4e3a\u7a7a\u5219\u4f1a ",(0,c.jsx)(n.code,{children:"panic(err)"}),"\u3002"]}),"\n",(0,c.jsx)(n.li,{children:"\u683c \u5f0f:"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"func (c *Cache) MustValues(ctx context.Context) []interface{} {\n  \tv, err := c.Values(ctx)\n  \tif err != nil {\n  \t\tpanic(err)\n  \t}\n  \treturn v\n}\n"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'func ExampleCache_MustValues() {\n  \tc := gcache.New()\n\n  \t// Write value\n  \tc.Set(ctx, "k1", "v1", 0)\n\n  \t// Values returns all values in the cache as slice.\n  \tdata := c.MustValues(ctx)\n  \tfmt.Println(data)\n\n  \t// Output:\n  \t// [v1]\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>l});var c=t(67294);const r={},i=c.createContext(r);function l(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),c.createElement(i.Provider,{value:n},e.children)}}}]);